Основным инструментом резервного копирования `rsync`.  Для периодического запуска скрипта резервного копирования будет использоваться `cron`.

#### Пример скрипта:

##### rsync

```
#!/bin/bash

# Папка, которую нужно копировать
SOURCE_DIR="/home/username/documents"

# Куда копировать (например, внешний диск или раздел /backup)
DEST_DIR="/backup/documents_backup"

# Текущая дата
DATE=$(date +"%Y-%m-%d_%H-%M-%S")

# Создание резервной копии с помощью rsync
rsync -av --delete "$SOURCE_DIR/" "$DEST_DIR/"
```

Параметры `rsync`:
- `-a` — архивный режим (для архивации данных).
- `-v` — "verbose" включает логирование команды.
- `--delete` — если файлы удалены из источника, то они удаляются из бекапа.

В скрипте нужно указать что и куда копировать. Такой скрипт будет хранить актуальное "зеркало" указанных файлов. Это позволит быстро восстанавливать актуальные данные.

##### tar

Если нужно сохранять "чекпоинты", то необходим другой подход. В нём данные будут храниться в сжатом виде, а также можно будет сделать несколько копий данных, например, на каждый день недели. Так можно будет восстановить более раннее состояние данных.

Скрипт основан на команде `tar`. Она расшифровывается как tape archive и используется для архивации. Отличительной особенностью `tar` является сохранение метаданных (временные метки, владелец, права доступа...)

Параметры:
- `-c`, `--create` — создание архива.
- `-u`, `--update` — обновляет файлы в существующем архиве.
- `-x`, `--extract` — извлекает данные из архива.
- `-f`, `--file` — указать имя архива.
- `v`, `--verbose` — логирование.
- `z` — сжатие архива через `gzip`.
- `j` — сжатие архива через `bzip2`.

```
#!/bin/bash

SOURCE_DIR="/home/username/documents"
DEST_DIR="/backup"
DATE=$(date +"%Y-%m-%d_%H-%M-%S")
ARCHIVE_NAME="backup-documents-$DATE.tar.gz"

# Архивация
tar -czf "$DEST_DIR/$ARCHIVE_NAME" "$SOURCE_DIR"
```

В указанной папке будет создаваться новый архив, при каждом выполнении скрипта.

#### Планирование выполнения скрипта:

После создания скрипта нужно сделать его исполняемым:
`chmod +x /home/username/backup.sh`

Для планирования используется `cron`. Это утилита, позволяющая создавать таблицы планирования.

- `crontab -e` — открывает конфигурационный файл (таблицу планирования) для редактирования.
- `crontab -l` — отображает список задач из конфигурационного файла.
- `crontab -r` — удаляет таблицу планирования.

Для того, чтобы запланировать задачу, нужно открыть таблицу планирования: `crontab -e` и записать туда:

```
# ┌───────────── минута (0 - 59)
# │ ┌───────────── час (0 - 23)
# │ │ ┌───────────── день месяца (1 - 31)
# │ │ │ ┌───────────── месяц (1 - 12)
# │ │ │ │ ┌───────────── день недели (0 - 7, где 0 и 7 — это воскресенье)
# │ │ │ │ │
# │ │ │ │ │
  0 3 * * * /home/username/backup.sh
```
Так, скрипт будет запускаться каждый день в 3:00.

