#### 28. Определение операционной системы (ОС). Место ОС в программном обеспечении компьютеров, компьютерных систем и сетей. Тенденции и перспективы развития операционных систем и сред.

**Операционная система** — это набор программ, который управляет аппаратными средствами компьютера и предоставляет среду для выполнения программ. ОС служит мостом между пользователем и компьютером, обеспечивая ресурсы для программ, управление файлами, памятью, процессами и многозадачностью.

##### Место ОС

В обеспечении компьютеров ОС играет важную роль, ведь она предоставляет интерфейс для взаимодействия пользователя, обеспечивает эффективное взаимодействие аппаратных частей компьютера и многое другое.

В компьютерных системах ОС обеспечивает эффективное взаимодействие узлов системы и централизованное управление.

ОС также часто используются в компьютерных сетях. Примером могут послужить ОС маршрутизаторов, коммутаторов и других сетевых устройств. Или например веб-хостинги. На их серверах стоят ОС, которые позволяют эффективно отвечать на запросы клиентов. В конце концов ОС обычных компьютеров участвует в сетевом соединении, обрабатывает пакеты, управляет сетевыми интерфейсами и многое другое.

##### Тенденции и перспективы

Направлений для развития ОС можно увидеть бесконечное множество. В последние годы сильно развиваются ОС мобильных устройств и встраиваемых устройств (устройства умного дома). Перспективным является направление разработки ОС, у которых в приоритете находится безопасность. ОС для квантовых компьютеров. Интеграция ИИ в ОС.

#### 29. Назначение, состав и функции ОС. Понятие компьютерных ресурсов.

##### Основные назначения ОС:
- Управление аппаратными компонентами и из взаимодействием. Распределение этих ресурсов между пользователями и процессами.
- Абстракция. Предоставление удобного интерфейса для взаимодействия с компьютером для пользователя. Сюда же можно отнести предоставление удобных функций для разработчиков ПО.
- Обеспечение безопасности и сохранности данных.
- Обеспечение связи между компьютерами в сети.
- Планирование задач, многозадачность...

##### Состав ОС: (по Васильеву)
- Текстовый пользовательский интерфейс
- GUI
- Программные библиотеки
- Утилиты
- Пользовательские программы

##### Функции ОС:
- Выполнение программ.
- Управление файловой системой.
- Управление устройствами ввода/вывода.

##### Понятие компьютерных ресурсов

**Ресурсы** — средства, имеющиеся в наличии, но к которым обращаются лишь при необходимости.

Существует много видов компьютерных ресурсов: аппаратные, файловые, программные (совокупность установленных программ), ресурс памяти (как постоянной, так и виртуальной) и многие другие.

Например к аппаратным ресурсам относятся: CPU, RAM, HDD/SSD, сетевые интерфейсы, устройства ввода/вывода.

#### 30. Концепция многоуровневого виртуального компьютера. Операционные оболочки и среды.

Чё?

#### 31. Архитектуры операционных систем.

| Тип архитектуры | Краткое описание                                                                                                                                                                                                                                                                                                                                 |
| --------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| Монолитное ядро | Все основные функции ОС встроены прямо в ядро. Обладает высокой скоростью, но слабой отказоустойчивостью                                                                                                                                                                                                                                         |
| Микроядро       | Ядро содержит только самые базовые функции (прерывания, процессы, планирование, межпроцессорное взаимодействие, память). Остальное вынесено в отдельные процессы в пространстве пользователя. Такая система медленнее из-за постоянных переключений контекста (world switch). Но в то же время она надёжнее. Также такую систему проще расширять |
| Гибридное ядро  | Модифицированные микроядра, позволяющие для ускорения работы запускать модули ОС в пространстве ядра. Используется Windows NT и BSD                                                                                                                                                                                                              |
| Модульное ядро  | Разновидность монолитного ядра, но с возможностью динамически подключать и отключать модули без перезагрузки системы. В отличии от гибридного ядра, модульное должно подключить модуль к ядру, чтобы он заработал. Выгружаются они для экономии памяти, безопасности (меньше модулей – меньше целей для атаки) и т.д.                            |
| Наноядро        | Крайне упрощенное и минималистичное ядро выполняет лишь обработку аппаратных прерываний. После этого оно посылает информацию о результатах обработки вышележащему ПО.                                                                                                                                                                            |
| Экзоядро        | Предоставляет лишь функции для взаимодействия между процессами, безопасного выделения и освобождения ресурсов.                                                                                                                                                                                                                                   |

#### 32. Поколения операционных систем. Классификация ОС. Интерфейсы операционных систем. Эволюция ОС. Эффективность ОС.

##### Поколения ОС:

- **Первое поколение (1945-1955):** На заре компьютерной эры каждым компьютером занималась своя команда инженеров. Все команды писались на машинном языке или даже строились электрическими схемами. Ничего даже близко похожего на ОС тогда не существовало. Да и не особо нужно было, ведь в основном компьютеры использовались для уточнения каких-то табличных значений (по типу синусов).
- **Второе поколение (1955-1965):** После применения транзисторов для построения компьютеров, появилось чёткое разделение между программистами и обслуживающим компьютер персоналом. Программист писал программу и переносил её на перфокарты, затем специальное устройство считывало программу и заносило всё на магнитную ленту. Эта лента вставлялась в компьютер и запускалась специальная программа (прообраз ОС). Она считывала задания с ленты и запускала его, записывая выходные данные на другую ленту. После работы вторая лента относилась на компьютер поменьше, который печатал информацию. После этого загружалась следующее задание.
- **Третье поколение (1965-1985):** К этому времени закрепились два типа компьютеров: большие и мощные (для научных работ и сложных вычислений) с пословной обработкой данных и небольшие, послабее (для повседневных задач или распечатки данных с больших компьютеров) с посимвольной обработкой. IBM хотела сделать такие типы совместимыми, чтобы одна программа могла работать на двух типах. Было разработано семейство машин IBM/360. У них была собственная ОС. Она обладала многозадачностью. Для этого память разбивалась на несколько разделов, в каждом из которых выполнялось своё задание. Также появилась возможность подкачки данных (spooling), когда раздел освобождался, ОС загружала новое задание с диска. Также в то время начала развиваться идея разделения времени, когда у каждого пользователя есть свой терминал для работы с машиной. Впоследствии была разработана система MULTCS а затем и UNIX.
- **Четвёртое поколение (1980-2025):** Происходило развитие микрокомпьютерных ОС. Компании IBM была нужна ОС для их нового IBM PC. Они обратились к Биллу Гейтсу, который выкупил у местного производителя компьютеров DOS (Disk Operating System) и с небольшими доработками отдал её IBM. Позже она была доработана до MS-DOS и быстро обрела доминирующее положение на рынке IBM PC. Далее начали появляться первые GUI. Изначально Windows был простой графической оболочкой, работающей поверх MS-DOS. Затем, в 1995 году, Windows отделилась как Windows 95 и впоследствии Windows 98. Это были системы, работающие на 16-разрядных процессорах. Позже вышла Windows NT для 32-разрядных систем. Параллельно ОС от Microsoft, развивались и другие системы. Для UNIX подобных систем была разработана X Window System, для графического интерфейса. Для этой системы можно было установить пользовательский интерфейс: Gnome/KDE. Также шло развитие сетевых, распределённых и мобильных ОС.

##### Классификация ОС:

- **ОС мейнфреймов**: отличаются огромными объёмами ввода/вывода данных. В основном ориентируются на одновременное выполнение огромного количества вычислений.
- **ОС серверов**: ориентируются на большое количество пользователей на одной машине.
- **Многопроцессорные ОС**: обеспечивают соединение множества центральных процессоров в единую систему для более эффективной работы.
- **ОС персональных компьютеров**: многозадачность.
- **ОС КПК.**
- **Встроенные ОС**.
- **ОС сенсорных узлов**: например системы видеонаблюдения.
- ОС реального времени: таким системам важно выполнить задачу в чётко заданное время. Бывают системы жёсткого и мягкого времени (строгие и не такие строгие). Например автопилот в самолёте или компьютер АЭС.

##### Интерфейсы взаимодействия ОС:

**Интерфейсы** — способы взаимодействия пользователя или приложений с ОС.

- **CLI (Command Line Interface)** — командная строка.
- **GUI (Graphical User Interface)** — графический интерфейс.
- **API (Application Programming Interface)** — набор функций для программного взаимодействия.
- **Системные вызовы (System Calls)** — низкоуровневый интерфейс программ к ядру ОС.

##### Эволюция ОС:

1) Переход от пакетной обработки к мультизадачности.
2) Появление многопользовательских систем.
3) Развитие GUI.
4) Расширение сетевых возможностей.
5) Развитие виртуализации и облачных технологий.
6) Развитие мобильных и встроенных ОС.

Эффективность ОС оценивается по **производительности**, **надёжности**, **устойчивости**, **безопасности**, **удобству использования**.

#### 33. Однопрограммные, многопрограммные, многопользовательские и многопроцессорные операционные системы и среды. Примеры распространенных ОС.

##### Однопрограммные ОС:

В каждый момент времени в памяти находится только одна программа, которая полностью задействует ресурсы процессора. Такой подход использовался в начале развития ОС. Пример: ранние версии MS-DOS.

##### Многопрограммные ОС:

В памяти находится сразу несколько программ и процессор может переключаться между ними. Такой подход эффективнее и используется сегодня во многих системах. Примеры: UNIX, Windows.

##### Многопользовательские ОС:

Несколько пользователей могут одновременно работать на одной машине. ОС будет распределять её ресурсы между ними. Примеры UNIX, Windows Server.

##### Многопроцессорные ОС:

Поддержка работы систем с несколькими процессорами для одновременного выполнения задач. Примеры Windows, Linux.

##### Среды:

**Среды ОС** — набор условий и инструментов, которые предоставляет операционная система для работы пользователя или программы. Среда это окружение, в котором загружается программа.

Различают два пространства (среды):

**Прикладная среда** (User space) — набор библиотек и сервисов для запуска приложений. Например Windows API или POSIX для UNIX систем.

**Системная среда** (Kernel) — переменные окружения, доступ к файловой системе и т.д.

![[Linux structure.png]]

##### Распространённые ОС:
- Windows
- Linux
- macOS
- Android
- iOS
- FreeBSD (многопользовательская)

#### 34. Прикладные операционные среды. Совместимость операционных систем. Виды совместимости. Языковая и двоичная совместимость.

В прикладных средах (User space) работают системы, которые не находятся в ядре по различным причинам.

##### Совместимость:
Можно придумать много разных примеров:
- **Файловая** — файлы с одной системы (NTFS от Windows) могут запускаться на другой (например на Linux). Это обеспечивается драйверами и виртуальными файловыми системами.
- **Прикладная** — возможность запускать приложения на разных системах. К примеру на Linux можно запускать приложения с Windows через WineHQ.
- **Стандарты POSIX (Portable Operating System Interface)** — чтобы системы были совместимыми (можно было переносить прикладные программы) был разработан стандарт POSIX. Он определял интерфейс ОС. Например он определяет набор стандартных системных утилит (cp, echo, cat…) для каждой совместимой системы.

**Языковая совместимость** — код нужно заново компилировать под каждую ОС.

**Двоичная совместимость** — совместимость на уровне готовых программных файлов. Код можно сразу запускать на другой системе.

#### 35. Эмуляция. Виртуальные машины и операционные среды.

**Эмуляция** — процесс, при котором одна система имитирует работу другой. Программа создаёт программную копию имитируемой аппаратной части. Например эмуляторы ARM-архитектуры. Wine имитирует Windows API для запуска приложений на Linux. Эмуляторы консолей на ПК.

**Виртуальная машина** — полная имитация одного компьютера внутри другого. Это работает с помощью технологии [виртуализации](Виртуализация.md).

**Операционные среды** — это окружение для приложений, которое эмулирует функции другой операционной системы без запуска отдельной ОС. Операционные среды просто реализуют API, не эмулируя работу железа какого-то устройства.

#### 36. Загрузка операционных систем (на примереe Windows, Linux). Этапы процесса загрузки. Работа загрузчика. Опции загрузочного меню. Выбор аппаратного профиля. Загрузка и инициализация ядра. Загрузка драйверов и сервисов. Регистрация пользователя.

##### Этапы загрузки Windows:
1) BIOS/UEFI выполняет POST (Power-On Self-Test), проверяя работоспособность устройств. Затем система идентифицирует допустимый системный диск и читает [^1]MBR (Master Boot Record) или GPT (GUID Partition Table) в зависимости от конфигурации. Это запускает Windows Boot Manager (WBM).
2) WBM может отображать меню загрузки, если на компьютере установлено несколько ОС. Пользователь может выбрать одну из них и например войти в безопасный режим.
3) Далее система использует технологию Plug-and-Play для автоматического обнаружения и конфигурации оборудования. Она сканирует слоты расширения (PCI), для идентификации подключенных устройств. В дальнейшем Windows будет загружать драйвера для этих устройств.
4) После запуска Boot Manager загружается Windows Loader, который загружает ядро (инициализирует). Оно инициализирует критические компоненты, такие как управление памятью и подготавливает систему к более высокоуровневым операциям.
5) После инициализации ядра Windows загружает драйверы устройств и системные службы (API, предоставляющий доступ прикладным программам, к аппаратным ресурсам системы).
6) Затем инициализируется GUI и отображает экран входа. Пользователь вводит имя пользователя и пароль, которые аутентифицируются через Security Accounts Manager (SAM). После успешной аутентификации загружается рабочий стол пользователя.

[^1]: MBR и GPT это разные схемы разделов для дисков. MBR это старая схема, ограничивающая диск до 2 ТБ и поддерживая 4 основных раздела. GPT – таблица разделов, работающая с глобально уникальными идентификаторами GUID (Globally Unique Identifier). Это современная схема, поддерживая огромные диски и до 128 разделов.

##### Этапы загрузки Linux:
1) BIOS/UEFI выполняет POST и загружает MBR с загрузочного диска. В этой записи содержится программа. которая запускает вторичный загрузчик, например GRUB (GRand Unified Bootloader) (их существует много), который читает конфигурационные файлы, чтобы узнать доступные ОС и т.п.
2) GRUB отображает различные варианты загрузки, позволяющие пользователю выбрать различные режимы восстановления и так далее.
3) Запускается начальный код ядра. Читаются конфигурационные файлы, для определения устройств ввода-вывода, и добавляются в таблицу устройств.
4) Далее GRUB загружает само ядро Linux и начальный RAM-диск (специальная файловая система для загрузки ОС) в память, передавая управление ядру. Его начальный код, написанный на ассемблере, определяет тип процессора, вычисляет доступную RAM, отключает прерывания, активирует MMU и вызывает процедуру, написанную на C, для продолжения запуска ядра.
5) После инициализации ядра система начинает конфигурацию оборудования. Загружаются драйверы. Ядро запускает процесс 0. который продолжает инициализацию, включая настройку таймеров, монтирование корневой файловой системы, и создания процесса 1 (init) и процесса-демона страниц (процесс 2). init, в зависимости от флагов, запускает систему в однопользовательском или многопользовательском режиме, запуская скрипты инициализации.
6) Далее init запускает программу getty, которая настраивает свойства терминала и отображает приглашение для ввода. Когда пользователь вводит имя, getty выполняет /bin/login, который запрашивает пароль и сравнивает его с информацией из /etc/passwd.

До этапа загрузки ядра процессор работает в реальном режиме (16 бит), затем переключается в защищенный (32 или 64 бит).

#### 37. Инсталляция и конфигурирование многопрограммной многопользовательской ОС с графическим интерфейсом (на примере Windows,). Требования к аппаратным ресурсам. Подготовка процесса инсталляции. Конфигурирование разделов на жестком диске. Выбор файловой системы. Выбор варианта установки (локальная, сетевая). Инсталляция мультиоперационных систем.


#### 38. Концепция процессов и потоков. Определение и модель процесса. Создание и завершение процессов. Иерархия процессов.


#### 39. Операции над процессами. Состояния процесса: выполнение, приостановка, возобновление. Блок управления процессами. Алгоритмы планирования.


#### 40. Обработка прерываний.


#### 41. Ядро операционной системы.


#### 42. Потоки и их использование. Модель потока. Реализация потоков в пространстве пользователя. Реализация потоков в ядре. Смешанная реализация. Активация планировщика.